@model E_Shop_Engine.Website.Models.OrderViewModel

@{
    ViewBag.Title = "Order Details";
}

<h3>Order Details</h3>

<div class="">
    <div class="w-100 text-center">
        <p>
            @Html.DisplayNameFor(model => model.Created)
            @Html.DisplayFor(model => model.Created)
        </p>
        <p>
            @Html.DisplayNameFor(model => model.Finished)
            @Html.DisplayFor(model => model.Finished)
        </p>
    </div>
    <div class="w-100 table-responsive">
            <table class="table table-striped table-hover table-light text-center">
                <thead class="table-primary">
                    <tr>
                        <th scope="col">
                            Catalog Number
                        </th>
                        <th scope="col">
                            Name
                        </th>
                        <th scope="col">
                            Quantity
                        </th>
                        <th scope="col">
                            Price
                        </th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model.OrderedCart.CartLines)
                    {
                        <tr class="clickable-row pointer" data-href="/@item.Product.ID/@item.Product.Name">
                            <td>
                                @Html.DisplayFor(modelItem => item.Product.CatalogNumber)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Product.Name)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Quantity)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Product.Price)
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
            <h3 class="float-right">Total value: @Model.OrderedCart.CartLines.Sum(x => x.Product.Price * x.Quantity)</h3>
        </div>
</div>
<p>
    @Html.ActionLink("Go back", "Index", "Account", null, new { @class = "btn btn-primary" })
</p>

@section Scripts
{
    <script>
        jQuery(document).ready(function ($) {
            $(".clickable-row").click(function () {
                window.location = $(this).data("href");
            });
        });
    </script>
}